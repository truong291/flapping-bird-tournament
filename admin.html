<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flapping Bird Tournament - Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #1a1a1a;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .content-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        .page-title {
            text-align: center;
            color: #ffd700;
            margin: 20px 0;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .login-section {
            text-align: center;
            margin: 50px 0;
        }

        .connect-btn {
            background: #ffd700;
            color: #2d7b82;
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .connect-btn:hover {
            background: #ffed4a;
            transform: translateY(-2px);
        }

        .admin-content {
            display: none;
        }

        .stats-section {
            background: #2d7b82;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }

        .stat-label {
            font-size: 10px;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 14px;
        }

        .bonus-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid #ffd700;
            color: #fff;
            padding: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            width: 200px;
            margin-top: 10px;
        }

        .control-section {
            background: #2d7b82;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .control-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 5px;
        }

        .control-btn {
            background: #ffd700;
            color: #2d7b82;
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
        }

        .control-btn:hover {
            background: #ffed4a;
        }

        .control-btn.active {
            background: #ff4444;
        }

        .note-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid #ffd700;
            color: #fff;
            padding: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            width: 100%;
            margin-top: 10px;
        }

        .settings-section {
            background: #2d7b82;
            padding: 20px;
            border-radius: 10px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            background: rgba(0, 0, 0, 0.2);
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #ffd700;
            color: #2d7b82;
        }

        .tab-content {
            display: none;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 5px;
        }

        .tab-content.active {
            display: block;
        }

        .setting-item {
            margin-bottom: 20px;
        }

        .setting-label {
            font-size: 10px;
            color: #ffd700;
            margin-bottom: 10px;
            display: block;
        }

        .setting-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid #ffd700;
            color: #fff;
            padding: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            width: 200px;
        }

        .add-btn {
            background: #ffd700;
            color: #2d7b82;
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .add-btn:hover {
            background: #ffed4a;
        }

        .distribution-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .distribution-input {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid #ffd700;
            color: #fff;
            padding: 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            width: 100px;
        }

        .delete-btn {
            background: #ff4444;
            color: #fff;
            border: none;
            padding: 5px 10px;
            font-family: 'Press Start 2P', cursive;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .delete-btn:hover {
            background: #ff6666;
        }

        .submit-btn {
            background: #4CAF50;
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-family: 'Press Start 2P', cursive;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            width: 100%;
        }

        .submit-btn:hover {
            background: #45a049;
        }

        .setting-row {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-bottom: 20px;
        }

        .error-message {
            color: #ff4444;
            font-size: 10px;
            margin-top: 5px;
            display: none;
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .control-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab-btn {
                flex: 1;
                min-width: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="content-container">
        <h1 class="page-title">Admin Panel</h1>

        <!-- Login Section -->
        <div class="login-section" id="loginSection">
            <button class="connect-btn" onclick="connectWallet()">Connect Wallet</button>
        </div>

        <!-- Admin Content -->
        <div class="admin-content" id="adminContent">
            <!-- Stats Section -->
            <div class="stats-section">
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-label">Current Jackpot</div>
                        <div class="stat-value">0.00 BNB</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Reserve Jackpot</div>
                        <div class="stat-value">0.00 BNB</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Players</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Plays</div>
                        <div class="stat-value">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Dev Earn</div>
                        <div class="stat-value">0.00 BNB</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">Bonus to Jackpot</div>
                    <input type="number" id="bonusInput" class="bonus-input" placeholder="0.00 BNB" step="0.01" min="0">
                    <button onclick="submitBonus()" class="control-btn" style="width: auto; margin-top: 10px;">Submit</button>
                </div>
            </div>

            <!-- Control Section -->
            <div class="control-section">
                <div class="control-grid">
                    <div class="control-item">
                        <button class="control-btn" onclick="togglePause(this)">Pause Game</button>
                        <input type="text" class="note-input" placeholder="Pause note...">
                    </div>
                    <div class="control-item">
                        <button class="control-btn" onclick="toggleMaintenance(this)">Maintenance</button>
                        <input type="text" class="note-input" placeholder="Maintenance note...">
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div class="settings-section">
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchTab('game')">Game Setting</button>
                    <button class="tab-btn" onclick="switchTab('bet')">Bet Setting</button>
                    <button class="tab-btn" onclick="switchTab('distribution')">Distribution Setting</button>
                </div>

                <!-- Game Settings -->
                <div class="tab-content active" id="gameTab">
                    <form id="gameSettingsForm" onsubmit="submitGameSettings(event)">
                        <div class="setting-item">
                            <label class="setting-label">Pipe Gap</label>
                            <input type="number" class="setting-input" name="pipeGap" placeholder="150" required min="100" max="300">
                            <div class="error-message">Please enter a value between 100 and 300</div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">Gravity</label>
                            <input type="number" class="setting-input" name="gravity" placeholder="0.5" required step="0.1" min="0.1" max="2">
                            <div class="error-message">Please enter a value between 0.1 and 2</div>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">Game Speed</label>
                            <input type="number" class="setting-input" name="gameSpeed" placeholder="1" required step="0.1" min="0.5" max="2">
                            <div class="error-message">Please enter a value between 0.5 and 2</div>
                        </div>
                        <button type="submit" class="submit-btn">Save Game Settings</button>
                    </form>
                </div>

                <!-- Bet Settings -->
                <div class="tab-content" id="betTab">
                    <form id="betSettingsForm" onsubmit="submitBetSettings(event)">
                        <div id="betInputs">
                            <div class="setting-row">
                                <div class="setting-item">
                                    <label class="setting-label">Bet 1</label>
                                    <input type="number" class="setting-input" name="bet1" placeholder="0.1 BNB" step="0.01" required min="0.01">
                                    <div class="error-message">Please enter a valid bet amount</div>
                                </div>
                            </div>
                            <div class="setting-row">
                                <div class="setting-item">
                                    <label class="setting-label">Bet 2</label>
                                    <input type="number" class="setting-input" name="bet2" placeholder="0.08 BNB" step="0.01" required min="0.01">
                                    <div class="error-message">Please enter a valid bet amount</div>
                                </div>
                                <button type="button" class="delete-btn" onclick="deleteBet(this)">Delete</button>
                            </div>
                            <div class="setting-row">
                                <div class="setting-item">
                                    <label class="setting-label">Bet 3</label>
                                    <input type="number" class="setting-input" name="bet3" placeholder="0.06 BNB" step="0.01" required min="0.01">
                                    <div class="error-message">Please enter a valid bet amount</div>
                                </div>
                                <button type="button" class="delete-btn" onclick="deleteBet(this)">Delete</button>
                            </div>
                            <div class="setting-row">
                                <div class="setting-item">
                                    <label class="setting-label">Bet 4</label>
                                    <input type="number" class="setting-input" name="bet4" placeholder="0.04 BNB" step="0.01" required min="0.01">
                                    <div class="error-message">Please enter a valid bet amount</div>
                                </div>
                                <button type="button" class="delete-btn" onclick="deleteBet(this)">Delete</button>
                            </div>
                            <div class="setting-row">
                                <div class="setting-item">
                                    <label class="setting-label">Bet 5</label>
                                    <input type="number" class="setting-input" name="bet5" placeholder="0.02 BNB" step="0.01" required min="0.01">
                                    <div class="error-message">Please enter a valid bet amount</div>
                                </div>
                                <button type="button" class="delete-btn" onclick="deleteBet(this)">Delete</button>
                            </div>
                        </div>
                        <button type="button" class="add-btn" onclick="addBetInput()">Add Bet</button>
                        <button type="submit" class="submit-btn">Save Bet Settings</button>
                    </form>
                </div>

                <!-- Distribution Settings -->
                <div class="tab-content" id="distributionTab">
                    <form id="distributionSettingsForm" onsubmit="submitDistributionSettings(event)">
                        <div id="distributionInputs">
                            <div class="distribution-item">
                                <input type="text" class="distribution-input" value="Top 1" readonly>
                                <input type="number" class="distribution-input" name="dist1" placeholder="50%" value="50" required min="0" max="100">
                                <div class="error-message">Please enter a value between 0 and 100</div>
                            </div>
                            <div class="distribution-item">
                                <input type="text" class="distribution-input" value="Top 2" readonly>
                                <input type="number" class="distribution-input" name="dist2" placeholder="20%" value="20" required min="0" max="100">
                                <button type="button" class="delete-btn" onclick="deleteDistribution(this)">Delete</button>
                                <div class="error-message">Please enter a value between 0 and 100</div>
                            </div>
                            <div class="distribution-item">
                                <input type="text" class="distribution-input" value="Top 3" readonly>
                                <input type="number" class="distribution-input" name="dist3" placeholder="15%" value="15" required min="0" max="100">
                                <button type="button" class="delete-btn" onclick="deleteDistribution(this)">Delete</button>
                                <div class="error-message">Please enter a value between 0 and 100</div>
                            </div>
                            <div class="distribution-item">
                                <input type="text" class="distribution-input" value="Top 4" readonly>
                                <input type="number" class="distribution-input" name="dist4" placeholder="10%" value="10" required min="0" max="100">
                                <button type="button" class="delete-btn" onclick="deleteDistribution(this)">Delete</button>
                                <div class="error-message">Please enter a value between 0 and 100</div>
                            </div>
                            <div class="distribution-item">
                                <input type="text" class="distribution-input" value="Top 5" readonly>
                                <input type="number" class="distribution-input" name="dist5" placeholder="5%" value="5" required min="0" max="100">
                                <button type="button" class="delete-btn" onclick="deleteDistribution(this)">Delete</button>
                                <div class="error-message">Please enter a value between 0 and 100</div>
                            </div>
                        </div>
                        <button type="button" class="add-btn" onclick="addDistributionInput()">Add Distribution</button>
                        <button type="submit" class="submit-btn">Save Distribution Settings</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Mock wallet connection
        function connectWallet() {
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('adminContent').style.display = 'block';
        }

        // Confirmation popup function
        function showConfirmation(message, callback) {
            if (confirm(message)) {
                callback();
            }
        }

        // Toggle pause/maintenance buttons with confirmation
        function togglePause(btn) {
            showConfirmation('Are you sure you want to ' + (btn.classList.contains('active') ? 'resume' : 'pause') + ' the game?', () => {
                btn.classList.toggle('active');
                btn.textContent = btn.classList.contains('active') ? 'Resume Game' : 'Pause Game';
            });
        }

        function toggleMaintenance(btn) {
            showConfirmation('Are you sure you want to ' + (btn.classList.contains('active') ? 'end' : 'start') + ' maintenance?', () => {
                btn.classList.toggle('active');
                btn.textContent = btn.classList.contains('active') ? 'End Maintenance' : 'Maintenance';
            });
        }

        // Submit bonus to jackpot
        function submitBonus() {
            const bonusAmount = document.getElementById('bonusInput').value;
            showConfirmation('Are you sure you want to add ' + bonusAmount + ' BNB to jackpot?', () => {
                console.log('Adding bonus:', bonusAmount, 'BNB');
                // Here you would typically send the data to your backend
                alert('Bonus added successfully!');
            });
        }

        // Submit game settings with confirmation
        function submitGameSettings(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            showConfirmation('Are you sure you want to update game settings?', () => {
                console.log('Game Settings:', data);
                // Here you would typically send the data to your backend
                alert('Game settings saved!');
            });
        }

        // Submit bet settings with confirmation
        function submitBetSettings(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            showConfirmation('Are you sure you want to update bet settings?', () => {
                console.log('Bet Settings:', data);
                // Here you would typically send the data to your backend
                alert('Bet settings saved!');
            });
        }

        // Submit distribution settings with confirmation
        function submitDistributionSettings(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData);
            
            // Validate total percentage = 100
            const total = Object.values(data).reduce((sum, value) => sum + Number(value), 0);
            if (total !== 100) {
                alert('Total distribution must equal 100%');
                return;
            }

            showConfirmation('Are you sure you want to update distribution settings?', () => {
                console.log('Distribution Settings:', data);
                // Here you would typically send the data to your backend
                alert('Distribution settings saved!');
            });
        }

        // Tab switching
        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            document.querySelector(`.tab-btn[onclick="switchTab('${tab}')"]`).classList.add('active');
            document.getElementById(`${tab}Tab`).classList.add('active');
        }

        // Add new bet input with delete button
        function addBetInput() {
            const betInputs = document.getElementById('betInputs');
            const newBet = document.createElement('div');
            newBet.className = 'setting-row';
            const betCount = betInputs.children.length + 1;
            
            newBet.innerHTML = `
                <div class="setting-item">
                    <label class="setting-label">Bet ${betCount}</label>
                    <input type="number" class="setting-input" name="bet${betCount}" placeholder="0.00 BNB" step="0.01" required min="0.01">
                    <div class="error-message">Please enter a valid bet amount</div>
                </div>
                <button type="button" class="delete-btn" onclick="deleteBet(this)">Delete</button>
            `;
            
            betInputs.appendChild(newBet);
        }

        // Add new distribution input with delete button
        function addDistributionInput() {
            const distributionInputs = document.getElementById('distributionInputs');
            const newDist = document.createElement('div');
            newDist.className = 'distribution-item';
            const topCount = distributionInputs.children.length + 1;
            
            newDist.innerHTML = `
                <input type="text" class="distribution-input" value="Top ${topCount}" readonly>
                <input type="number" class="distribution-input" name="dist${topCount}" placeholder="0%" value="0" required min="0" max="100">
                <button type="button" class="delete-btn" onclick="deleteDistribution(this)">Delete</button>
                <div class="error-message">Please enter a value between 0 and 100</div>
            `;
            
            distributionInputs.appendChild(newDist);
        }

        // Delete bet row
        function deleteBet(btn) {
            const row = btn.closest('.setting-row');
            if (document.getElementById('betInputs').children.length > 1) {
                row.remove();
                renameBetInputs();
            } else {
                alert('Cannot delete the last bet setting');
            }
        }

        // Delete distribution row
        function deleteDistribution(btn) {
            const row = btn.closest('.distribution-item');
            if (document.getElementById('distributionInputs').children.length > 1) {
                row.remove();
                renameDistributionInputs();
            } else {
                alert('Cannot delete the last distribution setting');
            }
        }

        // Rename bet inputs after deletion
        function renameBetInputs() {
            const betInputs = document.getElementById('betInputs');
            const rows = betInputs.children;
            for (let i = 0; i < rows.length; i++) {
                const label = rows[i].querySelector('.setting-label');
                const input = rows[i].querySelector('.setting-input');
                label.textContent = `Bet ${i + 1}`;
                input.name = `bet${i + 1}`;
            }
        }

        // Rename distribution inputs after deletion
        function renameDistributionInputs() {
            const distributionInputs = document.getElementById('distributionInputs');
            const rows = distributionInputs.children;
            for (let i = 0; i < rows.length; i++) {
                const label = rows[i].querySelector('input[readonly]');
                const input = rows[i].querySelector('input[type="number"]');
                label.value = `Top ${i + 1}`;
                input.name = `dist${i + 1}`;
            }
        }
    </script>
</body>
</html> 